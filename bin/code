#! /usr/bin/env bash

startPwd=`pwd`

function resetPwdOnCancel {
  cd $startPwd
}
trap resetPwdOnCancel INT TERM

cd ~/Code

if [ -z "$1" ]; then
  cd $(find . -maxdepth 3 -type d -name .git | sed -e "s/\/\.git$//" -e "s/^\.\///" | selecta)
else
  cd $(find . -maxdepth 3 -type d -name .git | sed -e "s/\/\.git$//" -e "s/^\.\///" | selecta --search "$1")
fi

trap - INT TERM
